{% extends "base_form_lv0.html" %}
{% load i18n %}
{% load static %}
{% load scielo_common %}

{% block breadcrumb %}
<ul class="breadcrumb">
    <li><a href="{% url index %}">{% trans 'Home' %}</a> <span class="divider">/</span></li>
    <li><a href="{% url journal.index %}">{% trans 'Journal Dashboard' %}</a> <span class="divider">/</span></li>
    <li><a href="{% url journal.edit journal.pk %}">{{ journal.title }}</a> <span class="divider">/</span></li>
    <li class="active">{% trans 'Journal Status' %}</li>
</ul>
{% endblock %}

{% block messages %}
  {% if add_form.errors or add_form.non_field_errors %}
    <ul>
      {% for field in add_form %}
        {% if field.errors %}
          <li>{{ field.label }}</li>
        {% endif %}
      {% endfor %}
      {% for errors in add_form.non_field_errors %}
        <li>{{ errors }}</li>
      {% endfor %}
    <ul>
  {% endif %}
{% endblock%}

{% block content %}
<span class="label"><a name="status"></a>{% trans "Journal Status History" %}</span>
<div class="well">
  <table class="table table-striped">
    <thead>
      <tr>
        <th>{% trans 'Status' %}</th>
        <th>{% trans 'created at' %}</th>
        <th>{% trans 'changed by' %}</th>
        <th>{% trans 'reason' %}</th>
      </tr>
    </theady>
    <tbody>
    {% for history in journal_history %}
      <tr>
        <td>{{ history.status }}</td>
        <td>{{ history.created_at }}</td>
        <td>{{ history.changed_by }}</td>
        <td>{{ history.reason }}</td>
      </tr>
    {% endfor %}
    <tbody>
  </table>
</div>
<form method="post" action="">
  {% csrf_token %}
  <span class="label">{% trans "Change Status" %}</span>
  <div class="well">
    <div class="alert alert-info">{% trans 'Be aware of this modification, once it could not be undone.' %}</div>
    <div class="control-group {% if add_form.pub_status.errors %}error{% endif %}">
      <label for="{{ add_form.pub_status.auto_id }}">
        <span {% if add_form.pub_status.field.required %}class="req-field"{% endif %}>
          {% trans add_form.pub_status.label %}
        </span>
      </label>
      <div class="controls">
        {{ add_form.pub_status }}
      </div>
    </div>
    <div class="control-group {% if add_form.pub_status_reason.errors %}error{% endif %}">
      <label for="{{ add_form.pub_status_reason.auto_id }}">
        <span {% if add_form.pub_status_reason.field.required %}class="req-field"{% endif %}>
          {% trans add_form.pub_status_reason.label %}
        </span>
      </label>
      <div class="controls">
        {{ add_form.pub_status_reason }}
      </div>
    </div>
  </div>
  <div class="row-fluid">
      <input class="btn btn-primary" name="submit" type="submit" value="{% trans "save" %}"/>
      <input class="btn btn-warning" type="reset" value="{% trans "cancel" %}"/>
  </div>
</form>
{% endblock %}

{% block extrafooter %}
{{ block.super }}
<script type="text/javascript" src="{% get_static_prefix %}js/tabslideout.js"></script>
 <script>
  $(document).ready(function() {
    $('#well-rezi-fixed').draggable();
    $(".help-text").popover('hide');

    $('.popup').popupWindow({
      scrollbars:1,
      resizable:1,
      centerScreen:1,
      width:600,
    });
  });
</script>
{% endblock %}
