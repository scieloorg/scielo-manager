{% extends "base_list.html" %}
{% load i18n %}
{% load static %}
{% load scielo_common %}
{% load query_string %}

{% block page_title %}{% trans "Journals" %}{% endblock %}

{% block breadcrumb %}
  <ul class="breadcrumb">
    <li><a href="{% url index %}">{% trans 'Home' %}</a> <span class="divider">/</span></li>
    {% if request.GET.q %}
       <li><a href="{% url journal.index %}">{% trans 'Journals DashBoard' %}</a> <span class="divider">/</span></li>
       <li class="active">{% trans 'Search' %}</li>
    {% else %}
      <li class="active">{% trans 'Journals DashBoard' %}</li>
    {% endif %}
  </ul>
{% endblock %}

{% block shortaccess %}
{% endblock %}

{% block body %}
<div class="row-fluid show-grid">
  <div class="span1" style="padding:0 0 10px 0">
    <a class="btn btn-primary" href="{% url journal.add %}">{% trans 'New' %}</a>
  </div>
  <div class="span5" style="padding:0 0 10px 0">
    <a href="{% url journal.add %}"
       class="btn tip-bottom"
       rel="tooltip"
       data-original-title="{% trans 'Trashed journals' %}">
      <i class="icon-trash"></i>
      {% trans 'Trash' %}
    </a>
  </div>
  <div class="span6" style="text-align:right">
      {% simple_pagination objects_journal %}
  </div>
</div>

<div class="row-fluid">
<ul class="nav nav-tabs">
  <li class="{% if not request.GET.is_available %} active {% endif %}"><a href="{% query_string request "q" "include_ampersand" %}">{% trans "All" %}</a></li>
  <li class="{% if request.GET.is_available == '1' %} active {% endif %}"><a href="{% query_string request "q" "include_ampersand" %}is_available=1"> {% trans "Enabled Journals" %}</a></li>
  <li class="{% if request.GET.is_available == '0' %} active {% endif %}"><a href="{% query_string request "q" "include_ampersand" %}is_available=0">{% trans "Disabled Journals" %}</a></li>
  <li class="dropdown" id="menu1">
    <a class="dropdown-toggle" data-toggle="dropdown" href="javascript:void(0)">
    {% trans "Actions" %}
    <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      {% if not request.GET.is_available %}
        <li><a id="bulk_action_enable" rel="{% url journal.bulk_action 'is_available' '0' %}" href="javascript:void(0)">{% trans "Disable" %}</a></li>
        <li><a id="bulk_action_disable" rel="{% url journal.bulk_action 'is_available' '1' %}" href="javascript:void(0)">{% trans "Enable" %}</a></li>
      {% endif %}
      {% if request.GET.is_available == '1' %}
        <li><a id="bulk_action_enable" rel="{% url journal.bulk_action 'is_available' '0' %}?is_available=1" href="javascript:void(0)">{% trans "Disable" %}</a></li>
      {% endif %}
      {% if request.GET.is_available == '0' %}
        <li><a id="bulk_action_enable" rel="{% url journal.bulk_action 'is_available' '1' %}?is_available=0" href="javascript:void(0)">{% trans "Enable" %}</a></li>
      {% endif %}
    </ul>
 </li>
</ul>
</div>
{% if objects_journal.object_list.count > 0 %}
  <form action="javascript:void(0)" method="post" id="bulk_action">
    {% csrf_token %}
    <table class="table table-striped">
    <thead>
      <tr>
        <th><input id="check_all" type="checkbox" name="check_all" value=""></th>
        <th>{% trans "Journal Title" %}</th>
        <th>{% trans "Print ISSN" %}</th>
        <th>{% trans "Electronic ISSN" %}</th>
        <th>{% trans "Status" %}</th>
        <th>{% trans "Validated" %}</th>
      </tr>
    </thead>
    <tbody>
      {% for journal in objects_journal.object_list %}
      <tr id="{{ journal.pk }}">
        <td>
          <input type="checkbox" name="action" value="{{ journal.id }}">
        </td>
        <td>
          <h4>
              <a href="{% url journal.edit journal.pk %}">{{ journal.title }}</a>
          </h4>
          <ul class="_actions">
            <li>
              <a href="{% url journal.edit journal.pk %}">
                {% trans 'Edit' %}
              </a>
            </li>
            <li>
              <a href="{% url issue.index journal.pk %}">
                {% trans 'Issues' %}
              </a>
            </li>
            <li>
              <a href="{% url section.index journal.pk %}">
                {% trans 'Sections' %}
              </a>
            </li>
            <li>
              <a href="{% url journal_status.edit journal.pk %}">
                {% trans 'Status' %}
              </a>
            </li>
          </ul>
        </td>
        <td>{{ journal.print_issn }}</td>
        <td>{{ journal.eletronic_issn }}</td>
        <td>{{ journal.pub_status }}</td>
        <td>
          {%if journal.validated %}
            <img src="{% get_static_prefix %}images/true.png" border="0" width="20px" height="20px" alt="{% trans "metadata validated" %}"/>
          {%else%}
            <img src="{% get_static_prefix %}images/false.png" border="0" width="20px" height="20px" alt="{% trans "metadata not validated" %}"/>
          {%endif%}
        </td>
      </tr>
      {% endfor %}
    <tbody>
    </table>
  </form>
{% endif %}
{% pagination objects_journal %}
{% endblock %}
